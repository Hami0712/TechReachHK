<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gate Garden Pro â€” Harder Logic</title>

  <style>
    :root{
      --bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --panel:#ffffff;      
      --ink:#0f172a;        
      --muted:#475569;      
      --accent:#2563eb;     
      --accent-2:#22c55e;   
      --accent-3:#f59e0b;   
      --accent-4:#ef4444;   
      --accent-5:#8b5cf6;   
      --line:#cbd5e1;       
      --chip:#eef2ff;
      --shadow: 0 10px 25px rgba(0,0,0,0.1);
      --shadow-hover: 0 20px 40px rgba(0,0,0,0.15);
      --good:#16a34a; 
      --bad:#dc2626;
    }
    *{ box-sizing:border-box; }
    html,body{ margin:0; padding:0; background:var(--bg); color:var(--ink); font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; min-height:100vh; }
    body{ font-size:18px; line-height:1.55; }
    .wrap{max-width:1200px; margin-inline:auto; padding:24px;}
    header{
      display:flex; align-items:center; gap:20px; margin-bottom:32px; 
      background:rgba(255,255,255,0.95); padding:24px; border-radius:20px; 
      box-shadow:var(--shadow); backdrop-filter:blur(10px);
    }
    header .logo{
      width:60px;height:60px; border-radius:16px; 
      background:linear-gradient(135deg,var(--accent),#60a5fa); 
      display:grid; place-items:center; color:#fff; font-weight:800; font-size:24px;
      box-shadow: 0 8px 16px rgba(37, 99, 235, 0.3);
    }
    h1{font-size:clamp(28px,4vw,42px); margin:0; background:linear-gradient(135deg,var(--accent),var(--accent-2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;}
    .subtitle{color:var(--muted); margin-top:8px; font-size:18px;}
    
    /* Language toggle */
    .lang-toggle{
      margin-left:auto; display:flex; align-items:center; gap:8px;
      background:rgba(255,255,255,0.1); padding:8px 16px; 
      border-radius:20px; border:1px solid rgba(255,255,255,0.2);
      backdrop-filter:blur(10px); transition:all 0.3s ease;
    }
    .lang-toggle:hover{background:rgba(255,255,255,0.2);}
    .lang-toggle button{
      background:none; border:none; color:var(--ink); font-size:14px; 
      font-weight:600; padding:4px 8px; border-radius:8px; 
      cursor:pointer; transition:all 0.2s ease;
    }
    .lang-toggle button.active{
      background:var(--accent); color:#fff; box-shadow:0 2px 8px rgba(37, 99, 235, 0.3);
    }
    .lang-toggle button:not(.active):hover{
      background:rgba(37, 99, 235, 0.1); color:var(--accent);
    }
    
    /* Navigation buttons - consistent sizing */
    .back-btn, .next-lesson-btn, .back-to-index-btn{
      background:var(--accent); color:#fff; border:none; padding:12px 20px; 
      border-radius:12px; font-weight:600; cursor:pointer; transition:all 0.3s ease;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
      text-decoration:none; display:inline-flex; align-items:center; gap:8px;
      min-width: 140px; height: 48px; justify-content: center;
    }
    .back-btn:hover{
      background:#1d4ed8; transform:translateY(-2px); box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
    }
    
    /* Next Lesson button specific styling */
    .next-lesson-btn{
      background:var(--accent-5); 
      box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
    }
    .next-lesson-btn:hover{
      background:#7c3aed; transform:translateY(-2px); box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
    }
    
    /* Back to All Lessons button specific styling */
    .back-to-index-btn{
      background:var(--accent-2); 
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
    }
    .back-to-index-btn:hover{
      background:#16a34a; transform:translateY(-2px); box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
    }
    
    main{ max-width:980px; margin:0 auto; padding:16px; }
    .card{ 
      background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
      backdrop-filter: blur(5px); border:2px solid var(--line); border-radius:16px; 
      padding:20px; margin:12px 0; box-shadow:var(--shadow); transition:all 0.3s ease;
    }
    .card:hover{ transform:translateY(-2px); box-shadow:var(--shadow-hover); }
    .row{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
    button, select, input[type="number"], input[type="text"], .btn{
      font-size:18px; padding:10px 14px; border-radius:10px; border:2px solid #0f172a; background:#fff; color:#0f172a;
    }
    button:hover, .btn:hover{ outline:3px solid var(--accent); cursor:pointer; }
    button:focus, .btn:focus, select:focus, input:focus{ outline:4px solid var(--accent); }
    .hint{ background:#fff; border-left:6px solid var(--accent); padding:10px; border-radius:8px; }
    .good{ color:var(--good); font-weight:700; }
    .bad{ color:var(--bad); font-weight:700; }
    .warn{ color:var(--warn); font-weight:700; }
    .sr{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
    .mt{ margin-top:12px; }
    .sm{ font-size:14px; opacity:.9; }
    .kbd{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background:#fff; border-radius:6px; padding:2px 6px; border:1px solid #0f172a; }
  #rule small{ display:block; color:var(--muted); font-size:14px; margin-top:4px; font-weight:normal; }
  </style>

<style>
  .switches label { display:inline-flex; align-items:center; gap:8px; padding:6px 10px; background:#fff; border:2px solid #0f172a; border-radius:10px; margin-right:6px; }
  .gate { font-size:42px; }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo" aria-hidden="true">ğŸšª</div>
      <div>
        <h1 data-en="AND OR NOT Logic" data-zh="AND OR NOT é‚è¼¯">AND OR NOT Logic</h1>
        <div class="subtitle" data-en="Master logic expressions with AND, OR, NOT, and XOR gates" data-zh="æŒæ¡é‚è¼¯è¡¨é”å¼ï¼šANDã€ORã€NOT å’Œ XOR é–˜">Master logic expressions with AND, OR, NOT, and XOR gates</div>
      </div>
      <div class="lang-toggle">
        <button class="active" onclick="switchLanguage('en')">EN</button>
        <button onclick="switchLanguage('zh')">ç¹ä¸­</button>
      </div>
    </header>
    
    <div style="margin-bottom: 20px; display: flex; gap: 12px; align-items: center;">
      <a href="7. Conditions Game.html" class="back-btn">
        â† <span data-en="Previous Lesson" data-zh="ä¸Šä¸€èª²">Previous Lesson</span>
      </a>
      <button id="nextLessonBtn" class="next-lesson-btn" data-en="Next Lesson â†’" data-zh="ä¸‹ä¸€èª² â†’">Next Lesson â†’</button>
      <button id="backToIndexBtn" class="back-to-index-btn" data-en="Back to All Lessons" data-zh="è¿”å›é¦–é ">Back to All Lessons</button>
    </div>

    <main>
  <div class="card"><p><strong>Learn:</strong> <em>Logic expressions</em> with AND, OR, NOT, and XOR. <strong>Why:</strong> Logic rules power many programs and circuits.</p></div>
  <div class="card">
    <div class="row"><strong>Level <span id="lvl">1</span>/12</strong> <button id="hintBtn">Hint</button></div>
    <div id="hint" class="hint mt" hidden>Hint: XOR means â€œone or the other, but not bothâ€. Try toggling one input at a time.</div>
    <div class="mt"><strong>Rule:</strong> <span id="rule"></span></div>
    <div class="switches mt">
      <label><input type="checkbox" id="A"/> A</label>
      <label><input type="checkbox" id="B"/> B</label>
      <label><input type="checkbox" id="C"/> C</label>
      <label><input type="checkbox" id="D"/> D</label>
    </div>
    <div class="mt gate" id="gate" aria-live="polite">ğŸ”’ Closed</div>
    <div id="feedback" class="mt" aria-live="polite"></div>
  </div>
    </main>
  </div>
<script>
function XOR(a,b){ return (a&&!b) || (!a&&b); }
const RULES=[
  {text:{en:"A XOR B", zh:"A XOR B<br/><small>A ç•°æˆ– Bï¼ˆä¸€å€‹æˆ–å¦ä¸€å€‹ï¼Œä½†ä¸åŒæ™‚ï¼‰</small>"}, fn:(A,B,C,D)=>XOR(A,B)},
  {text:{en:"(A AND B) OR C", zh:"(A AND B) OR C<br/><small>ï¼ˆA ä¸” Bï¼‰æˆ– C</small>"}, fn:(A,B,C,D)=>(A&&B)||C},
  {text:{en:"(A OR B) AND (C OR D)", zh:"(A OR B) AND (C OR D)<br/><small>ï¼ˆA æˆ– Bï¼‰ä¸”ï¼ˆC æˆ– Dï¼‰</small>"}, fn:(A,B,C,D)=>(A||B)&&(C||D)},
  {text:{en:"NOT A AND D", zh:"NOT A AND D<br/><small>é A ä¸” D</small>"}, fn:(A,B,C,D)=>(!A)&&D},
  {text:{en:"(A XOR C) AND B", zh:"(A XOR C) AND B<br/><small>ï¼ˆA ç•°æˆ– Cï¼‰ä¸” B</small>"}, fn:(A,B,C,D)=>XOR(A,C)&&B},
  {text:{en:"(A AND NOT B) OR (C AND NOT D)", zh:"(A AND NOT B) OR (C AND NOT D)<br/><small>ï¼ˆA ä¸”é Bï¼‰æˆ–ï¼ˆC ä¸”é Dï¼‰</small>"}, fn:(A,B,C,D)=>(A&&!B)||(C&&!D)},
  {text:{en:"(A OR B) XOR (C OR D)", zh:"(A OR B) XOR (C OR D)<br/><small>ï¼ˆA æˆ– Bï¼‰ç•°æˆ–ï¼ˆC æˆ– Dï¼‰</small>"}, fn:(A,B,C,D)=>XOR((A||B),(C||D))},
  {text:{en:"(A AND B AND C) OR D", zh:"(A AND B AND C) OR D<br/><small>ï¼ˆA ä¸” B ä¸” Cï¼‰æˆ– D</small>"}, fn:(A,B,C,D)=>(A&&B&&C)||D},
  {text:{en:"(A XOR B) XOR (C XOR D)", zh:"(A XOR B) XOR (C XOR D)<br/><small>ï¼ˆA ç•°æˆ– Bï¼‰ç•°æˆ–ï¼ˆC ç•°æˆ– Dï¼‰</small>"}, fn:(A,B,C,D)=>XOR(XOR(A,B),XOR(C,D))},
  {text:{en:"(NOT B AND C) OR (A AND NOT D)", zh:"(NOT B AND C) OR (A AND NOT D)<br/><small>ï¼ˆé B ä¸” Cï¼‰æˆ–ï¼ˆA ä¸”é Dï¼‰</small>"}, fn:(A,B,C,D)=>(!B&&C)||(A&&!D)},
  {text:{en:"(A OR NOT C) AND (B XOR D)", zh:"(A OR NOT C) AND (B XOR D)<br/><small>ï¼ˆA æˆ–é Cï¼‰ä¸”ï¼ˆB ç•°æˆ– Dï¼‰</small>"}, fn:(A,B,C,D)=>(A||!C)&&XOR(B,D)},
  {text:{en:"(A AND (B OR C)) XOR D", zh:"(A AND (B OR C)) XOR D<br/><small>ï¼ˆA ä¸”ï¼ˆB æˆ– Cï¼‰ï¼‰ç•°æˆ– D</small>"}, fn:(A,B,C,D)=>XOR((A&&(B||C)),D)}
];
let level=0;

// Translation helper functions
function getCurrentLanguage() {
  return document.documentElement.lang === 'zh-Hant' ? 'zh' : 'en';
}

function getTranslatedMessage(messages) {
  const lang = getCurrentLanguage();
  return messages[lang] || messages.en || messages;
}

// Translation messages
const TRANSLATIONS = {
  feedback: {
    true: { en: 'True!', zh: 'æ­£ç¢ºï¼' },
    next: { en: 'Nextâ€¦', zh: 'ä¸‹ä¸€é—œâ€¦' },
    allSolved: { en: 'All rules solved!', zh: 'æ‰€æœ‰è¦å‰‡éƒ½è§£æ±ºäº†ï¼' },
    setSwitches: { en: 'Set switches so the rule is true.', zh: 'è¨­ç½®é–‹é—œä½¿è¦å‰‡ç‚ºçœŸã€‚' }
  },
  hint: {
    xorHint: { en: 'Hint: XOR means "one or the other, but not both". Try toggling one input at a time.', zh: 'æç¤ºï¼šXOR æ„æ€æ˜¯ã€Œä¸€å€‹æˆ–å¦ä¸€å€‹ï¼Œä½†ä¸åŒæ™‚ã€ã€‚å˜—è©¦ä¸€æ¬¡åˆ‡æ›ä¸€å€‹è¼¸å…¥ã€‚' }
  }
};

function render(){
  document.getElementById('lvl').textContent=level+1;
  const ruleText = getTranslatedMessage(RULES[level].text);
  document.getElementById('rule').innerHTML = ruleText;
  document.getElementById('hint').hidden=true;
  update();
}
function update(){
  const A=document.getElementById('A').checked;
  const B=document.getElementById('B').checked;
  const C=document.getElementById('C').checked;
  const D=document.getElementById('D').checked;
  const ok = RULES[level].fn(A,B,C,D);
  const gate=document.getElementById('gate'), fb=document.getElementById('feedback');
  if(ok){
    gate.textContent="ğŸ”“ Open";
    if(level<RULES.length-1){ 
      const trueMsg = getTranslatedMessage(TRANSLATIONS.feedback.true);
      const nextMsg = getTranslatedMessage(TRANSLATIONS.feedback.next);
      fb.innerHTML=`<span class='good'>${trueMsg}</span> ${nextMsg}`; 
      setTimeout(()=>{ level++; ["A","B","C","D"].forEach(id=>document.getElementById(id).checked=false); render(); }, 900); 
    }
    else {
      const allSolvedMsg = getTranslatedMessage(TRANSLATIONS.feedback.allSolved);
      fb.innerHTML=`<span class='good'>${allSolvedMsg}</span>`;
    }
  } else { 
    gate.textContent="ğŸ”’ Closed"; 
    const setSwitchesMsg = getTranslatedMessage(TRANSLATIONS.feedback.setSwitches);
    fb.textContent = setSwitchesMsg; 
  }
}
["A","B","C","D"].forEach(id=> document.getElementById(id).addEventListener('change', update));
document.getElementById('hintBtn').onclick=()=>{ 
  const hintMsg = getTranslatedMessage(TRANSLATIONS.hint.xorHint);
  document.getElementById('hint').innerHTML = hintMsg;
  document.getElementById('hint').hidden=false; 
};

// Navigation functions
function nextLesson() {
  window.location.href = '9. Smart Home AND OR NOT.html';
}

function backToIndex() {
  window.location.href = '../index.html';
}

// Initialize navigation buttons
function initializeNavigationButtons() {
  const nextLessonBtn = document.getElementById('nextLessonBtn');
  const backToIndexBtn = document.getElementById('backToIndexBtn');
  
  if (nextLessonBtn) {
    nextLessonBtn.addEventListener('click', nextLesson);
  }
  
  if (backToIndexBtn) {
    backToIndexBtn.addEventListener('click', backToIndex);
  }
}

// Language switching function
function switchLanguage(lang) {
  // Update button states
  document.querySelectorAll('.lang-toggle button').forEach(btn => btn.classList.remove('active'));
  const targetBtn = document.querySelector(`.lang-toggle button[onclick="switchLanguage('${lang}')"]`);
  if (targetBtn) targetBtn.classList.add('active');
  
  // Update all elements with data attributes
  document.querySelectorAll('[data-en][data-zh]').forEach(element => {
    element.innerHTML = (lang === 'zh') ? element.getAttribute('data-zh') : element.getAttribute('data-en');
  });
  
  // Update HTML lang attribute
  document.documentElement.lang = (lang === 'zh') ? 'zh-Hant' : 'en';
  
  // Store language preference
  localStorage.setItem('preferredLanguage', lang);
  
  // Refresh current level content with new language
  render();
}

// Initialize on DOM load
document.addEventListener('DOMContentLoaded', function() {
  initializeNavigationButtons();
  
  // Load saved language preference
  const savedLang = localStorage.getItem('preferredLanguage') || 'en';
  if (savedLang === 'zh') {
    // Update button states
    document.querySelectorAll('.lang-toggle button').forEach(btn => {
      btn.classList.remove('active');
    });
    document.querySelector('.lang-toggle button[onclick="switchLanguage(\'zh\')"]').classList.add('active');
    
    // Update content
    document.querySelectorAll('[data-en][data-zh]').forEach(element => {
      element.innerHTML = element.getAttribute('data-zh');
    });
    document.documentElement.lang = 'zh-Hant';
  }
  
  // Render after language is set
  render();
});
</script>
</body>
</html>
